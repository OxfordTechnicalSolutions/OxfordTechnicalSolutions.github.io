<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My First GAD &mdash; OxTS C++ Generic Aiding SDK  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Static Aiding" href="example-static-aiding.html" />
    <link rel="prev" title="Speed" href="generic-aiding-speed-updates.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> OxTS C++ Generic Aiding SDK
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction to Generic Aiding</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic-aiding-requirements.html">Generic Aiding Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="estimating-errors.html">Estimating errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="timestamps.html">Timestamping Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-rates.html">Data Rates</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Aiding types</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="generic-aiding-position-updates.html">Position</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic-aiding-velocity-updates.html">Velocity</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic-aiding-attitude-updates.html">Attitude</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic-aiding-heading-updates.html">Heading</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic-aiding-speed-updates.html">Speed</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">My First GAD</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#method">Method</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linux">Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#source-code-breakdown">Source Code Breakdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="#is-my-data-being-received-by-the-ins">Is my data being received by the INS?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="example-static-aiding.html">Static Aiding</a></li>
<li class="toctree-l1"><a class="reference internal" href="example-static-aiding-no-boost.html">Static Aiding (No Boost)</a></li>
<li class="toctree-l1"><a class="reference internal" href="example-zv-wheelspeed.html">Zero Velocity Wheelspeed</a></li>
<li class="toctree-l1"><a class="reference internal" href="example-heading.html">Heading Update Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Material</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="defining-a-local-reference-frame.html">User-defined Local Frame (beta)</a></li>
<li class="toctree-l1"><a class="reference internal" href="gad-files.html">.gad files</a></li>
<li class="toctree-l1"><a class="reference internal" href="reassigning-traditional-sources.html">Reassigning Traditional Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="stream-priority.html">Stream Priority</a></li>
<li class="toctree-l1"><a class="reference internal" href="position-only-initialisation.html">Position Only Initialisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="all-options.html">All Configuration options</a></li>
<li class="toctree-l1"><a class="reference internal" href="is-my-data-being-received.html">Is my data being received?</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncom-updates.html">NCOM Output</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gal-cpp/index.html">C++</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OxTS C++ Generic Aiding SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>My First GAD</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/longform/example-my-first-gad.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="my-first-gad">
<span id="myfirstgadexample"></span><h1>My First GAD<a class="headerlink" href="#my-first-gad" title="Permalink to this heading"></a></h1>
<p>This is the simplest example of Generic Aiding. The full source code for this
example can be found in <cite>/examples/gal/my-first-gad.cpp</cite>.</p>
<p>In this example, velocity data is sent to an OxTS INS in real time.</p>
<p>Recommended prior reading:</p>
<ul class="simple">
<li><p>Building the SDK (README.md)</p></li>
<li><p><a class="reference internal" href="intro.html#introduction"><span class="std std-ref">Introduction</span></a></p></li>
</ul>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>An OxTS INS with the relevant Generic Aiding Feature Codes enabled. If you
are not sure whether you have the right Feature Codes or are unfamiliar with
them, contact <a class="reference external" href="mailto:support&#37;&#52;&#48;oxts&#46;com">support<span>&#64;</span>oxts<span>&#46;</span>com</a>.</p></li>
<li><p>A PC, connected to the INS via ethernet.</p></li>
<li><p>The GAD SDK has been built on this machine / pre-built binaries have been
downloaded (not currently available).</p></li>
</ul>
</section>
<section id="method">
<h2>Method<a class="headerlink" href="#method" title="Permalink to this heading"></a></h2>
<p>How to run the executable.</p>
<section id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Permalink to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Navigate to the relevant directory in the build folder:
<cite>cd &lt;build_dir&gt;/examples/gal</cite>.</p></li>
<li><p>Run the executable: <cite>./my-first-gad-example &lt;IP&gt; &lt;Packets&gt;</cite>. This will begin
sending Generic Aiding packets to the specified IP address, which should be
set as the IP address of the INS,
e.g. <cite>./my-first-gad-example 192.168.25.10 1000</cite>.</p></li>
</ol>
</section>
<section id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Navigate to the relevant configuration type directory in the build folder:
<cite>cd &lt;build_dir&gt;/examples/gal/Debug</cite>.</p></li>
<li><p>From the command line run the executable: <cite>my-first-gad-example.exe &lt;IP&gt; &lt;Packets&gt;</cite>. This will begin
sending Generic Aiding packets to the specified IP address, which should be
set as the IP address of the INS,
e.g. <cite>my-first-gad-example.exe 192.168.25.10 1000</cite>.</p></li>
</ol>
</section>
</section>
<section id="source-code-breakdown">
<h2>Source Code Breakdown<a class="headerlink" href="#source-code-breakdown" title="Permalink to this heading"></a></h2>
<p>Here we run through the source code, explaining the purpose of each of the lines.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;oxts/gal-cpp/gad.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;oxts/gal-cpp/gad_handler.hpp&quot;</span><span class="cp"></span>
</pre></div>
</div>
<p>These are the two includes required for most users of Generic Aiding. <cite>gad.hpp</cite>
contains the <cite>Gad</cite> class used to form the basis of all Generic Aiding Data.
<cite>gad_handler.hpp</cite> contains the <cite>GadHandler</cite> class, which provides functionality
to encode and send the data packets.</p>
<p>Now we enter the <cite>main()</cite> function:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">argv</span><span class="p">[])</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">unit_ip</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">num_packets</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>
</pre></div>
</div>
<p>There are two input arguments for this executable: the IPv4 address of
the INS which will be receiving the data, and the number of packets to send.
Note that there is no advanced parsing or error handling to check that the
argument has been inputted correctly. The other variable here sets the number
of packets to send.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OxTS</span><span class="o">::</span><span class="n">GadVelocity</span><span class="w"> </span><span class="n">gv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OxTS</span><span class="o">::</span><span class="n">GadVelocity</span><span class="p">(</span><span class="mi">130</span><span class="p">);</span><span class="w"></span>
<span class="n">gv</span><span class="p">.</span><span class="n">SetVelNeu</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="n">gv</span><span class="p">.</span><span class="n">SetVelNeuVar</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">);</span><span class="w"></span>
<span class="n">gv</span><span class="p">.</span><span class="n">SetTimeVoid</span><span class="p">();</span><span class="w"></span>
<span class="n">gv</span><span class="p">.</span><span class="n">SetAidingLeverArmFixed</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="n">gv</span><span class="p">.</span><span class="n">SetAidingLeverArmVar</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.01</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Next, we set up the velocity data with stream ID 130.</p>
<p>The velocity is set in the North, East, Up (left-handed) coordinate system.
Since we are creating <em>static</em> data, the velocity is zero in all axes. The
covariance values for this data are set using the function
<code class="code highlight cpp docutils literal highlight-cpp"><span class="n">SetVelNeuVar</span><span class="p">()</span><span class="w"></span></code>. For more information on covariances, see
<a class="reference internal" href="estimating-errors.html#estimatingerrors"><span class="std std-ref">Estimating errors</span></a> or <a class="reference internal" href="generic-aiding-velocity-updates.html#velocitycovariancematrix"><span class="std std-ref">Covariance matrix</span></a>.</p>
<p>The function <code class="code highlight cpp docutils literal highlight-cpp"><span class="n">SetTimeVoid</span><span class="p">()</span><span class="w"></span></code> indicates that the data will be sent with no
timestamp, making it the simplest way to handle timing when working with
Generic Aiding. In this setup, the INS will timestamp the packet upon receipt.</p>
<p>The final step to fill out the data packet is to set the lever-arm between the
IMU and the aiding device. The lever-arm is a 3D translation in the IMU frame
from the IMU (marked on the case of the INS) to the aiding device, measured in
metres. The covariance values on this lever-arm are then set according to how
accurately each translation could be measured.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OxTS</span><span class="o">::</span><span class="n">GadHandler</span><span class="w"> </span><span class="n">gh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OxTS</span><span class="o">::</span><span class="n">GadHandler</span><span class="p">();</span><span class="w"></span>
<span class="n">gh</span><span class="p">.</span><span class="n">SetEncoderToBin</span><span class="p">();</span><span class="w"></span>
<span class="n">gh</span><span class="p">.</span><span class="n">SetOutputModeToUdp</span><span class="p">(</span><span class="n">unit_ip</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>This block of code initialises an instance of the <cite>GadHandler</cite> and sets it up
to send binary Generic Aiding data via UDP.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">num_packets</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">gh</span><span class="p">.</span><span class="n">SendPacket</span><span class="p">(</span><span class="n">gv</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;packet &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; sent&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">OxTS</span><span class="o">::</span><span class="n">Sleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>This final code block creates a <cite>for</cite> loop in which the Generic Aiding data is
encoded and sent via UDP to the INS. With <code class="code highlight cpp docutils literal highlight-cpp"><span class="n">OxTS</span><span class="o">::</span><span class="n">Sleep</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="w"></span></code>, the data
will be sent at a rate of ~10Hz.</p>
</section>
<section id="is-my-data-being-received-by-the-ins">
<h2>Is my data being received by the INS?<a class="headerlink" href="#is-my-data-being-received-by-the-ins" title="Permalink to this heading"></a></h2>
<p>If you are unsure whether the INS is using the GAD, see
<a class="reference internal" href="is-my-data-being-received.html#ismydatabeingreceived"><span class="std std-ref">Is my data being received?</span></a>.</p>
<p>Recommended next steps:</p>
<ul class="simple">
<li><p>Read more on creating aiding for each type: <a class="reference internal" href="../index.html#aidingtypestoc"><span class="std std-ref">Aiding types</span></a>.</p></li>
<li><p>See a more complex example: <a class="reference internal" href="example-static-aiding.html#staticaidingexample"><span class="std std-ref">Static Aiding</span></a>.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="generic-aiding-speed-updates.html" class="btn btn-neutral float-left" title="Speed" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="example-static-aiding.html" class="btn btn-neutral float-right" title="Static Aiding" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, OxTS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>