<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Static Aiding (No Boost) &mdash; OxTS C++ Generic Aiding SDK  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Zero Velocity Wheelspeed" href="example-zv-wheelspeed.html" />
    <link rel="prev" title="Static Aiding" href="example-static-aiding.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            OxTS C++ Generic Aiding SDK
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction to Generic Aiding</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic-aiding-requirements.html">Generic Aiding Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="timestamps.html">Timestamping Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensorcharacterisation.html">Sensor characterisation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Aiding types</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="generic-aiding-position-updates.html">Position</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic-aiding-velocity-updates.html">Velocity</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic-aiding-attitude-updates.html">Attitude</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic-aiding-heading-updates.html">Heading</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic-aiding-speed-updates.html">Speed</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="example-my-first-gad.html">My First GAD</a></li>
<li class="toctree-l1"><a class="reference internal" href="example-static-aiding.html">Static Aiding</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Static Aiding (No Boost)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#method">Method</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linux">Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#source-code-breakdown">Source Code Breakdown</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="example-zv-wheelspeed.html">Zero Velocity Wheelspeed</a></li>
<li class="toctree-l1"><a class="reference internal" href="example-heading.html">Heading Update Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Material</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="defining-a-local-reference-frame.html">User-defined Local Frame</a></li>
<li class="toctree-l1"><a class="reference internal" href="gad-files.html">.gad files (Advanced)</a></li>
<li class="toctree-l1"><a class="reference internal" href="reassigning-traditional-sources.html">Reassigning traditional data sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="stream-priority.html">Stream priority</a></li>
<li class="toctree-l1"><a class="reference internal" href="position-only-initialisation.html">Initialisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="position-only-initialisation.html#position-only-initialisation">Position-only initialisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="is-my-data-being-received.html">Is my data being received?</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncom-updates.html">NCOM Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced-commands.html">Advanced commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced-commands.html#all-configuration-options">All configuration options</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gal-cpp/index.html">C++</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OxTS C++ Generic Aiding SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Static Aiding (No Boost)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/longform/example-static-aiding-no-boost.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="static-aiding-no-boost">
<span id="staticaidingexamplenoboost"></span><h1>Static Aiding (No Boost)<a class="headerlink" href="#static-aiding-no-boost" title="Link to this heading"></a></h1>
<p>The is a simplified version of <a class="reference internal" href="example-static-aiding.html#staticaidingexample"><span class="std std-ref">Static Aiding</span></a>, which can be used
when Boost is not available. Since the socket functionality in this SDK is based
on Boost, the socket functionality must be replaced by users with their chosen
socket implementation. The full source code for this example can be found in
<cite>/examples/gal/static-aiding-no-boost.cpp</cite>.</p>
<p>Recommended prior reading:</p>
<ul class="simple">
<li><p>Building the SDK (README.md)</p></li>
<li><p><a class="reference internal" href="intro.html#introduction"><span class="std std-ref">Introduction</span></a></p></li>
</ul>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>An OxTS INS with the relevant Generic Aiding Feature Codes enabled. If you
are not sure whether you have the right Feature Codes or are unfamiliar with
them, contact <a class="reference external" href="mailto:support&#37;&#52;&#48;oxts&#46;com">support<span>&#64;</span>oxts<span>&#46;</span>com</a>.</p></li>
<li><p>A PC, connected to the INS via ethernet.</p></li>
<li><p>The GAD SDK has been built on this machine / pre-built binaries have been
downloaded (not currently available).</p></li>
</ul>
</section>
<section id="method">
<h2>Method<a class="headerlink" href="#method" title="Link to this heading"></a></h2>
<p>How to run the executable.</p>
<section id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Navigate to the relevant directory in the build folder:
<cite>cd &lt;build_dir&gt;/examples/gal</cite>.</p></li>
<li><p>Run the executable: <cite>./static-aiding-no-boost-example</cite>. This will begin sending
Generic Aiding packets. You can also provide the number of packets to send: <cite>./static-aiding-no-boost-example 100</cite></p></li>
</ol>
</section>
<section id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Navigate to the relevant configuration directory in the build folder:
<cite>cd &lt;build_dir&gt;/examples/gal/Debug</cite>.</p></li>
<li><p>Run the executable: <cite>static-aiding-no-boost-example.exe</cite>. This will begin sending
Generic Aiding packets.  You can also provide the number of packets to send: <cite>static-aiding-no-boost-example.exe 100</cite></p></li>
</ol>
</section>
</section>
<section id="source-code-breakdown">
<h2>Source Code Breakdown<a class="headerlink" href="#source-code-breakdown" title="Link to this heading"></a></h2>
<p>Here we run through the source code, explaining the purpose of each of the lines.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;oxts/gal-cpp/gad.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;oxts/gal-cpp/gad_encoders/gad_encoder_bin.hpp&quot;</span>
</pre></div>
</div>
<p>These are the two includes required for most users of Generic Aiding. <cite>gad.hpp</cite>
contains the <cite>Gad</cite> class used to form the basis of all Generic Aiding Data.
<cite>gad_handler.hpp</cite> contains the <cite>GadHandler</cite> class, which provides functionality
to encode and send the data packets.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifdef _WIN32</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;windows.h&gt;</span>
<span class="cp">#elif __linux__</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>
<span class="cp">#endif</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">OxTS</span>
<span class="p">{</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">Sleep</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">sleepMs</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#ifdef __linux__</span>
<span class="w">    </span><span class="n">usleep</span><span class="p">(</span><span class="n">sleepMs</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span><span class="w">   </span><span class="c1">// usleep takes sleep time in us (1 millionth of a second)</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef _WIN32</span>
<span class="w">    </span><span class="n">Sleep</span><span class="p">(</span><span class="n">sleepMs</span><span class="p">);</span><span class="w">    </span><span class="c1">// Sleep takes sleep time in ms.</span>
<span class="cp">#endif</span>
<span class="p">}</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// OxTS</span>
</pre></div>
</div>
<p>This code is not exclusive to Generic Aiding. It is a basic implementation of a
cross-platform sleep function, which will make the system wait a set period of
time before continuing execution.</p>
<p>Now we enter the <cite>main()</cite> function:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">num_packets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span>
</pre></div>
</div>
<p>This variable determines how many packets to send before exiting the program. This can also be provided as a command line argument.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OxTS</span><span class="o">::</span><span class="n">GadPosition</span><span class="w"> </span><span class="n">gp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OxTS</span><span class="o">::</span><span class="n">GadPosition</span><span class="p">(</span><span class="mi">129</span><span class="p">);</span>
<span class="n">gp</span><span class="p">.</span><span class="n">SetPosGeodetic</span><span class="p">(</span><span class="mf">51.91520330</span><span class="p">,</span><span class="mf">-1.24479140</span><span class="p">,</span><span class="mf">111.525</span><span class="p">);</span>
<span class="n">gp</span><span class="p">.</span><span class="n">SetPosVar</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="n">gp</span><span class="p">.</span><span class="n">SetTimeVoid</span><span class="p">();</span>
<span class="n">gp</span><span class="p">.</span><span class="n">SetAidingLeverArmFixed</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">1.0</span><span class="p">);</span>
<span class="n">gp</span><span class="p">.</span><span class="n">SetAidingLeverArmVar</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">);</span>
</pre></div>
</div>
<p>This portion of code sets up the static Generic Aiding Position data. Each
Generic Aiding type has its own <cite>Gad&lt;type&gt;</cite> class which inherits from the <cite>Gad</cite>
superclass. These subclasses are designed to simplify the process of setting
data for users when working with the different data types.</p>
<p>When initialising an instance of any <cite>Gad</cite> class, it is necessary to assign it
a unique stream ID. These can take values in the range 128-254, and each one
must be unique.</p>
<p>This particular position data is set in the WGS84 coordinate frame, using
Latitude, Longitude, Altitude. The default values here correspond to the OxTS
offices - users will need to change this to match their location. The
covariance values are then set for this data. More information on how
covariances should be estimated can be found in <span class="xref std std-ref">estimatingerrors</span> .</p>
<p>The Generic Aiding interface allows a few ways to timestamp data being sent to
an INS. In this example, we choose to send no timestamp, or “Void”. This
indicates to the INS that the data should be timestamped by the system upon
receipt.</p>
<p>Finally, the lever arm and the variance on these values are set. The lever arm
is the linear offset from the INS to the aiding device, in the IMU frame. The
variance indicates how accurately these values are known. By setting the lever
arm to “Fixed” (see <a class="reference internal" href="generic-aiding-position-updates.html#positionlvafixed"><span class="std std-ref">Fixed</span></a>), it is indicated to the INS that
this lever arm is not to be optimised. This is the most common setup.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OxTS</span><span class="o">::</span><span class="n">GadEncoderBin</span><span class="w"> </span><span class="n">geb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OxTS</span><span class="o">::</span><span class="n">GadEncoderBin</span><span class="p">();</span>
</pre></div>
</div>
<p>This block of code initialises an instance of the <cite>GadEncoderBin</cite>. This will
provide the functionality to encode a Generic Aiding packet to binary.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">num_packets</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">gh</span><span class="p">.</span><span class="n">EncodePacket</span><span class="p">(</span><span class="n">gp</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Add your code here for interacting with the static aiding packets.</span>
<span class="w">  </span><span class="c1">// Use accessor functions geb.GetPacket() and geb.GetPacketSize() to send</span>
<span class="w">  </span><span class="c1">// the packet via chosen UDP socket library to the INS IP address and port</span>
<span class="w">  </span><span class="c1">// 50485.</span>

<span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; packets sent&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;packet size: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">geb</span><span class="p">.</span><span class="n">GetPacketSize</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">  </span><span class="n">OxTS</span><span class="o">::</span><span class="n">Sleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This final code block creates a for loop in which the Generic Aiding data is
encoded. The comment indicates where users are required to add their socket
implementation in order to send the Generic Aiding data to the INS. With
<cite>OxTS::Sleep(100)</cite>, the data will be sent at a rate of ~10Hz.</p>
<p>Recommended next steps:</p>
<ul class="simple">
<li><p>Read more on creating the aiding types relevant for your system:
<a class="reference internal" href="../index.html#aidingtypestoc"><span class="std std-ref">Aiding types</span></a>.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="example-static-aiding.html" class="btn btn-neutral float-left" title="Static Aiding" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="example-zv-wheelspeed.html" class="btn btn-neutral float-right" title="Zero Velocity Wheelspeed" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, OxTS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>