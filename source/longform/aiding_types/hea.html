

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Heading &mdash; GAD-SDK 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/tabs.js?v=3030b3cb"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Debug Information" href="../ismydatabeingreceived.html" />
    <link rel="prev" title="Attitude" href="att.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            GAD-SDK
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Welcome</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview of GAD SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Aiding types</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pos.html">Position</a></li>
<li class="toctree-l2"><a class="reference internal" href="vel.html">Velocity</a></li>
<li class="toctree-l2"><a class="reference internal" href="spe.html">Speed</a></li>
<li class="toctree-l2"><a class="reference internal" href="att.html">Attitude</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Heading</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#aiding-frames">Aiding frames</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variance">Variance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alignment">Alignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-examples">Code examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ismydatabeingreceived.html">Debug Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GAD_post_processing.html">Post-processing GAD data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../section5.html">Advanced Options</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials and examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../my_first_gad.html">My first GAD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../static_aiding.html">Static-aiding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../example_can_ws.html">CAN wheel speed</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference section</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../KF.html">The Kalman Filter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Frames.html">Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lever_arm.html">Lever arms and Alignments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cov.html">Covariance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../time_stamping.html">Timestamping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Glossary.html">Glossary of terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GAD_cols.html">GAD file column definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enum_tab.html">Table of GAD file Enums</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adv_com.html">Advanced commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gal-cpp/index.html">C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../py_com.html">Python API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">GAD-SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Aiding types</a></li>
      <li class="breadcrumb-item active">Heading</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/source/longform/aiding_types/hea.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="heading">
<span id="hea-aidingtype"></span><h1>Heading<a class="headerlink" href="#heading" title="Link to this heading"></a></h1>
<p>The Heading update is effectively a one-dimensional version of the Attitude update.</p>
<p>You can set the fields for this data type using functions from the GadHeading class.</p>
<section id="aiding-frames">
<h2>Aiding frames<a class="headerlink" href="#aiding-frames" title="Link to this heading"></a></h2>
<p>The heading angle is the projection of the vehicle’s body x-axis in the navigation frame’s north-east plane. You can use the following frames for heading:</p>
<ul class="simple">
<li><p><strong>NED frame</strong> This is the standard frame for supplying heading updates and moves in line with the vehicle.</p></li>
<li><p><strong>User-defined Local Frame</strong> Heading aiding also supports a user-defined local frame.</p></li>
</ul>
<p>Heading measurements in both frames are expected in degrees (0–360°).</p>
<p><a class="reference internal" href="../Frames.html#frames"><span class="std std-ref">Learn more about frames.</span></a></p>
</section>
<section id="variance">
<h2>Variance<a class="headerlink" href="#variance" title="Link to this heading"></a></h2>
<p>Covariance is used as an estimate of the accuracy of a measurement.
Measurements with a smaller covariance will be given greater weight in the navigation solution, and any obvious outliers will be rejected by the navigation engine.</p>
<p>Because only one value is provided for this update, only one variance value is needed. The Heading variance is expected in degrees squared.
Note that a normal covariance is needed for the alignment.</p>
<p>To learn more about covariance and how to derive the values you need, see <a class="reference internal" href="../cov.html#cov"><span class="std std-ref">here</span></a>.</p>
</section>
<section id="alignment">
<h2>Alignment<a class="headerlink" href="#alignment" title="Link to this heading"></a></h2>
<p>As for the Attitude aiding type, heading measurements have an associated alignment, as opposed to a lever arm. This is because the linear offset between the attitude sensor and the IMU does not affect the measurements; you only need to account for the angular offset between the two.</p>
<p><strong>Fixed</strong></p>
<p>A fixed alignment is the simplest to set up, as it requires no external configuration. It is set within the generic aiding packet itself.</p>
<p><strong>Config</strong></p>
<p>A Config alignment is functionally equivalent to a fixed alignment. The difference is that the lever arm is set in the config file of the INS, instead of within the data packet.</p>
</section>
<section id="code-examples">
<h2>Code examples<a class="headerlink" href="#code-examples" title="Link to this heading"></a></h2>
<p>Here are two examples of how to configure the GadHandler to transmit heading data.</p>
<p><strong>Example 1: NED frame, with a fixed alignment.</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-0-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-0-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OxTS</span><span class="o">::</span><span class="n">Gal_Cpp</span><span class="o">::</span><span class="n">GadHeading</span><span class="w"> </span><span class="nf">ghe</span><span class="p">(</span><span class="mi">135</span><span class="p">);</span><span class="w"> </span><span class="c1">// Sets heading aiding data to GAD stream ID 135</span>
<span class="n">ghe</span><span class="p">.</span><span class="n">SetHeading</span><span class="p">(</span><span class="n">heading</span><span class="p">);</span><span class="w"> </span><span class="c1">// Set a heading measurement in NED frame</span>
<span class="n">ghe</span><span class="p">.</span><span class="n">SetHeadingVar</span><span class="p">(</span><span class="n">var_hea</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only one measurement, so covariance matrix is only one value!</span>
<span class="n">ghe</span><span class="p">.</span><span class="n">SetAidingAlignmentFixed</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Set an alignment in the packet of 3 degrees from the IMU heading</span>
<span class="n">ghe</span><span class="p">.</span><span class="w"> </span><span class="n">SetAidingAlignmentVar</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Set alignment covariance of 1 degree</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-0-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">ghe</span> <span class="o">=</span> <span class="n">oxts_sdk</span><span class="o">.</span><span class="n">GadHeading</span><span class="p">(</span><span class="mi">135</span><span class="p">)</span> <span class="c1"># Sets heading aiding data to GAD stream ID 135</span>
<span class="n">ghe</span><span class="o">.</span><span class="n">heading</span> <span class="o">=</span> <span class="n">heading</span> <span class="c1"># Set a heading measurement in NED frame</span>
<span class="n">ghe</span><span class="o">.</span><span class="n">heading_var</span> <span class="o">=</span> <span class="n">var_hea</span> <span class="c1"># Only one measurement, so covariance matrix is only one value!</span>
<span class="n">ghe</span><span class="o">.</span><span class="n">aiding_alignment_fixed</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span> <span class="c1"># Set an alignment in the packet of 3 degrees from the IMU heading</span>
<span class="n">ghe</span><span class="o">.</span><span class="n">aiding_alignment_var</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span> <span class="c1"># Set alignment covariance of 1 degree</span>
</pre></div>
</div>
</div></div>
<p><strong>Example 2: User-defined Local Frame, with an alignment from the config file.</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-1-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-1-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-1-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OxTS</span><span class="o">::</span><span class="n">Gal_Cpp</span><span class="o">::</span><span class="n">GadHeading</span><span class="w"> </span><span class="nf">ghe</span><span class="p">(</span><span class="mi">135</span><span class="p">);</span><span class="w"> </span><span class="c1">// Sets heading aiding data to GAD stream ID 135</span>
<span class="n">ghe</span><span class="p">.</span><span class="n">SetHeadingLocal</span><span class="p">(</span><span class="n">heading</span><span class="p">);</span><span class="w"> </span><span class="c1">// Set a heading measurement in a user defined local frame</span>
<span class="n">ghe</span><span class="p">.</span><span class="n">SetHeadingVar</span><span class="p">(</span><span class="n">var_hea</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only one measurement, so covariance matrix is only one value!</span>
<span class="n">ghe</span><span class="p">.</span><span class="n">SetAidingAlignmentConfig</span><span class="p">();</span><span class="w"> </span><span class="c1">// Set alignment to &#39;config&#39;, i.e. set in the configuration file</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-1-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">ghe</span> <span class="o">=</span> <span class="n">oxts_sdk</span><span class="o">.</span><span class="n">GadHeading</span><span class="p">(</span><span class="mi">135</span><span class="p">)</span> <span class="c1"># Sets heading aiding data to GAD stream ID 135</span>
<span class="n">ghe</span><span class="o">.</span><span class="n">heading_local</span> <span class="o">=</span> <span class="n">heading</span> <span class="c1"># Set a heading measurement in a user defined local frame</span>
<span class="n">ghe</span><span class="o">.</span><span class="n">heading_var</span> <span class="o">=</span> <span class="n">var_hea</span> <span class="c1"># Only one measurement, so covariance matrix is only one value!</span>
<span class="n">ghe</span><span class="o">.</span><span class="n">set_aiding_alignment_config</span><span class="p">()</span> <span class="c1"># Set alignment to &#39;config&#39;, i.e. set in the configuration file</span>
</pre></div>
</div>
</div></div>
<p>Note that, to make use of the local frame, you must define the local coordinate frame in the configuration of the INS.
To do this, add the similar commands to the config file of your INS:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">gad_lrf2_51</span><span class="mf">.915</span><span class="n">_</span><span class="mf">-1.244</span><span class="n">_94</span><span class="mf">.597</span><span class="n">_</span><span class="mf">-90.0</span><span class="n">_180</span><span class="mf">.0</span><span class="n">_0</span><span class="mf">.0</span><span class="w"> </span><span class="c1">// This sets the lrf ID &#39;1&#39; with an example lat, long, alt, yaw, pitch, roll.</span>
<span class="o">-</span><span class="n">gad_lrf_id135_1</span><span class="w"> </span><span class="c1">// Match the aiding stream with ID &#39;135&#39; with lrf ID &#39;1&#39;</span>
<span class="o">-</span><span class="n">rotation1_3</span><span class="mf">.0</span><span class="n">_0</span><span class="mf">.0</span><span class="n">_0</span><span class="mf">.0</span><span class="n">_1</span><span class="mf">.0</span><span class="n">_0</span><span class="mf">.0</span><span class="n">_0</span><span class="mf">.0</span><span class="w"> </span><span class="c1">// # Set an alignment in the packet of 3, 0 and 0 degrees respectively from the INS axes. Also Set alignment covariance matrix to a diagonal matrix</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="att.html" class="btn btn-neutral float-left" title="Attitude" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../ismydatabeingreceived.html" class="btn btn-neutral float-right" title="Debug Information" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, OxTS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>